{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// \ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    // оголошення змінних, зв'язок з HTML \n    const startButton = document.querySelector(\"[data-start]\");\n    const daysElement = document.querySelector(\"[data-days]\");\n    const hoursElement = document.querySelector(\"[data-hours]\");\n    const minutesElement = document.querySelector(\"[data-minutes]\");\n    const secondsElement = document.querySelector(\"[data-seconds]\");\n    const dateInput = document.querySelector(\"#datetime-picker\");\n    let countdownInterval;\n    let selectedDate;\n    \n    // ініціалізація випадаючого календарика\n    flatpickr(\"#datetime-picker\", {\n        enableTime: true,\n        time_24hr: true,\n        defaultDate: new Date(),\n        minuteIncrement: 1,\n        onClose(selectedDates) {\n            selectedDate = selectedDates[0];\n            if (selectedDate > new Date()) {\n                startButton.disabled = false;\n            } else {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Please choose a date in the future',\n                    position: 'topRight'\n                });\n                startButton.disabled = true;\n            }\n        }\n    });\n    // перевірка ініціалізації\n    console.log(\"Flatpickr initialized\"); \n    \n    // активація кнопки\n    startButton.addEventListener(\"click\", () => {\n        if (!selectedDate || selectedDate <= new Date()) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Invalid date selected!',\n                position: 'topRight'\n            });\n            return;\n        }\n        clearInterval(countdownInterval);\n        countdownInterval = setInterval(updateTimer, 1000);\n        startButton.disabled = true;\n    \n        // Блокуємо можливість вибору дати\n        dateInput.disabled = true; // Блокує input\n    });\n    \n    \n    // відлік таймера\n    function updateTimer() {\n        const now = new Date();\n        const timeRemaining = selectedDate - now;\n        \n        if (timeRemaining <= 0) {\n            clearInterval(countdownInterval);\n            iziToast.success({\n                title: 'Done',\n                message: 'Countdown finished!',\n                position: 'topRight'\n            });\n             // Розблоковуємо input після завершення таймера\n             dateInput.disabled = false;\n            return;\n        }\n        \n        // конвертація в зручний для читання формат\n        const { days, hours, minutes, seconds } = convertMs(timeRemaining);\n        \n        // привласнення вихідних значень таймера\n        daysElement.textContent = formatTime(days);\n        hoursElement.textContent = formatTime(hours);\n        minutesElement.textContent = formatTime(minutes);\n        secondsElement.textContent = formatTime(seconds);\n    }\n    \n    // Конвертуємо UNIX формат часу в прийнятний для сприймання\n    function convertMs(ms) {\n        const seconds = Math.floor((ms / 1000) % 60);\n        const minutes = Math.floor((ms / 1000 / 60) % 60);\n        const hours = Math.floor((ms / (1000 * 60 * 60)) % 24);\n        const days = Math.floor(ms / (1000 * 60 * 60 * 24));\n        return { days, hours, minutes, seconds };\n    }\n    console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n    console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n    console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n    \n    // Додаємо \"0\" для прийнятного формату часу\n    function formatTime(value) {\n        return String(value).padStart(2, \"0\");\n    }\n});\n"],"names":["startButton","daysElement","hoursElement","minutesElement","secondsElement","dateInput","countdownInterval","selectedDate","selectedDates","updateTimer","timeRemaining","days","hours","minutes","seconds","convertMs","formatTime","ms","value"],"mappings":"oCACA,SAAS,iBAAiB,mBAAoB,IAAM,CAEhD,MAAMA,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAY,SAAS,cAAc,kBAAkB,EAC3D,IAAIC,EACAC,EAGJ,UAAU,mBAAoB,CAC1B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBD,EAAeC,EAAc,CAAC,EAC1BD,EAAe,IAAI,KACnBP,EAAY,SAAW,IAEvB,SAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACT,SAAU,UAC9B,CAAiB,EACDA,EAAY,SAAW,GAE9B,CACT,CAAK,EAED,QAAQ,IAAI,uBAAuB,EAGnCA,EAAY,iBAAiB,QAAS,IAAM,CACxC,GAAI,CAACO,GAAgBA,GAAgB,IAAI,KAAQ,CAC7C,SAAS,MAAM,CACX,MAAO,QACP,QAAS,yBACT,SAAU,UAC1B,CAAa,EACD,MACH,CACD,cAAcD,CAAiB,EAC/BA,EAAoB,YAAYG,EAAa,GAAI,EACjDT,EAAY,SAAW,GAGvBK,EAAU,SAAW,EAC7B,CAAK,EAID,SAASI,GAAc,CAEnB,MAAMC,EAAgBH,EADV,IAAI,KAGhB,GAAIG,GAAiB,EAAG,CACpB,cAAcJ,CAAiB,EAC/B,SAAS,QAAQ,CACb,MAAO,OACP,QAAS,sBACT,SAAU,UAC1B,CAAa,EAEAD,EAAU,SAAW,GACtB,MACH,CAGD,KAAM,CAAE,KAAAM,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAa,EAGjET,EAAY,YAAce,EAAWL,CAAI,EACzCT,EAAa,YAAcc,EAAWJ,CAAK,EAC3CT,EAAe,YAAca,EAAWH,CAAO,EAC/CT,EAAe,YAAcY,EAAWF,CAAO,CAClD,CAGD,SAASC,EAAUE,EAAI,CACnB,MAAMH,EAAU,KAAK,MAAOG,EAAK,IAAQ,EAAE,EACrCJ,EAAU,KAAK,MAAOI,EAAK,IAAO,GAAM,EAAE,EAC1CL,EAAQ,KAAK,MAAOK,GAAM,IAAO,GAAK,IAAO,EAAE,EAErD,MAAO,CAAE,KADI,KAAK,MAAMA,GAAM,IAAO,GAAK,GAAK,GAAG,EACnC,MAAAL,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CACD,QAAQ,IAAIC,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC,EAG/B,SAASC,EAAWE,EAAO,CACvB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACL,CAAC"}